<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –Ω–∞ PetsHub</title>
    <!-- –°–≤—è–∑—ã–≤–∞–µ–º HTML —Å CSS -->
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <header>
        <h1>–õ—é–±–∏—Ç–µ –¥–æ–º–∞—à–Ω–∏—Ö –∂–∏–≤–æ—Ç–Ω—ã—Ö?</h1>
        <nav>
            <a href="#">üê∂ –°–æ–±–∞–∫</a>
            <a href="#">üôÄ –ö–æ—à–µ–∫</a>
            <a href="#">ü¶Ü –∏–ª–∏ –¥–∞–∂–µ –£—Ç—è—Ç</a>
        </nav>
    </header>

    <main>
        <section class="intro">
            <h2>–ü—Ä–∏–≤–µ—Ç, –º—ã PetsHub</h2>
            <p>–°–∞–π—Ç –µ—â–µ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ, –Ω–æ —Ç—É—Ç –º—ã –±—É–¥–µ–º –æ–±–æ–∑—Ä–µ–≤–∞—Ç—å —Å–∞–º—ã—Ö –º–∏–ª—ã—Ö, —É–¥–∏–≤–∏—Ç–µ–ª—å–Ω—ã—Ö, –º–∞–ª–µ–Ω—å–∫–∏—Ö –¥—Ä—É–∑–µ–π</p>
            <img src="https://via.placeholder.com/300" alt="–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ">
        </section>

        <section class="about">
            <h2>–û–±–æ –Ω–∞—Å</h2>
            <p>–û –Ω–∞—à–∏—Ö –¥—Ä—É–∑—å—è—Ö</p>
            <ul>
                <li>üòé –ö—Ä—É—Ç–æ</li>
                <li>‚ò∫ –ú–∏–ª–æ</li>
                <li>üòÇ –°–º–µ—à–Ω–æ</li>
            </ul>
        </section>

        <!-- –°–µ–∫—Ü–∏—è –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –æ—Ü–µ–Ω–æ–∫ -->
        <section class="rating-section">
            <h2>–ü—Ä–æ—Å—å–±–∞ –æ—Ü–µ–Ω–∏—Ç—å –Ω–∞—à –ø—Ä–æ–¥—É–∫—Ç</h2>
            <div class="stars-container">
                <div class="stars" id="stars">
                    <span class="star" data-value="1">‚òÖ</span>
                    <span class="star" data-value="2">‚òÖ</span>
                    <span class="star" data-value="3">‚òÖ</span>
                    <span class="star" data-value="4">‚òÖ</span>
                    <span class="star" data-value="5">‚òÖ</span>
                </div>
                <p class="rating-text" id="ratingText">–û—Ü–µ–Ω–∏—Ç–µ –æ—Ç 1 –¥–æ 5 –∑–≤–µ–∑–¥</p>
            </div>
            <div id="ratingResult" class="rating-result"></div>
        </section>
    </main>

    <footer>
        <p>¬© 2024 PetsHub. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
        <p>–°–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏: <a href="mailto:example@example.com">example@example.com</a></p>
    </footer>

    <!-- JavaScript –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –æ—Ü–µ–Ω–æ–∫ –∏ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏ -->
    <script>
        // –°–∏—Å—Ç–µ–º–∞ –æ—Ü–µ–Ω–∫–∏ –∑–≤–µ–∑–¥–∞–º–∏
        const stars = document.querySelectorAll('.star');
        const ratingText = document.getElementById('ratingText');
        const ratingResult = document.getElementById('ratingResult');
        let currentRating = 0;

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∑–≤–µ–∑–¥
        stars.forEach(star => {
            star.addEventListener('click', function() {
                currentRating = parseInt(this.getAttribute('data-value'));
                updateStars(currentRating);
                sendRatingWithLocation(currentRating);
            });

            star.addEventListener('mouseover', function() {
                const hoverRating = parseInt(this.getAttribute('data-value'));
                updateStars(hoverRating, false);
            });
        });

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è —É—Ö–æ–¥–∞ –º—ã—à–∏ —Å –±–ª–æ–∫–∞ –∑–≤–µ–∑–¥
        document.querySelector('.stars').addEventListener('mouseleave', function() {
            updateStars(currentRating, true);
        });

        // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤–Ω–µ—à–Ω–µ–≥–æ –≤–∏–¥–∞ –∑–≤–µ–∑–¥
        function updateStars(rating, isPermanent = true) {
            stars.forEach(star => {
                const starValue = parseInt(star.getAttribute('data-value'));
                if (starValue <= rating) {
                    star.classList.add('active');
                } else {
                    star.classList.remove('active');
                }
            });

            if (isPermanent) {
                const messages = [
                    "–û—Ü–µ–Ω–∏—Ç–µ –æ—Ç 1 –¥–æ 5 –∑–≤–µ–∑–¥",
                    "–ü–ª–æ—Ö–æ üòû",
                    "–¢–∞–∫ —Å–µ–±–µ üòê", 
                    "–ù–æ—Ä–º–∞–ª—å–Ω–æ üôÇ",
                    "–•–æ—Ä–æ—à–æ üòä",
                    "–û—Ç–ª–∏—á–Ω–æ! ü§©"
                ];
                ratingText.textContent = messages[rating] || messages[0];
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Ü–µ–Ω–∫–∏ —Å –≥–µ–æ–ª–æ–∫–∞—Ü–∏–µ–π
        function sendRatingWithLocation(rating) {
            ratingResult.innerHTML = '<div class="rating-info">‚åõ –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤–∞—à—É –æ—Ü–µ–Ω–∫—É...</div>';
            ratingResult.className = 'rating-result show';

            if (!navigator.geolocation) {
                showRatingResult("–°–ø–∞—Å–∏–±–æ –∑–∞ –æ—Ü–µ–Ω–∫—É! –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤–∞—à–∏–º –±—Ä–∞—É–∑–µ—Ä–æ–º.", true);
                saveRatingData({
                    rating: rating,
                    error: "Geolocation not supported",
                    timestamp: new Date().toISOString()
                });
                return;
            }

            navigator.geolocation.getCurrentPosition(
                // –£—Å–ø–µ—à–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏
                function(position) {
                    const latitude = position.coords.latitude;
                    const longitude = position.coords.longitude;
                    const accuracy = position.coords.accuracy;
                    const timestamp = new Date().toISOString();
                    
                    // –°–æ–±–∏—Ä–∞–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
                    const userAgent = navigator.userAgent;
                    const screenResolution = `${screen.width}x${screen.height}`;
                    const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
                    const language = navigator.language;
                    
                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ
                    saveRatingData({
                        rating: rating,
                        latitude: latitude,
                        longitude: longitude,
                        accuracy: accuracy,
                        timestamp: timestamp,
                        userAgent: userAgent,
                        screenResolution: screenResolution,
                        timezone: timezone,
                        language: language,
                        pageUrl: window.location.href
                    });
                    
                    showRatingResult(`–°–ø–∞—Å–∏–±–æ –∑–∞ –æ—Ü–µ–Ω–∫—É ${rating} ‚≠ê! –í–∞—à –æ—Ç–∑—ã–≤ –æ—á–µ–Ω—å –≤–∞–∂–µ–Ω –¥–ª—è –Ω–∞—Å!`, true);
                },
                // –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏
                function(error) {
                    let errorType = "unknown";
                    
                    switch(error.code) {
                        case error.PERMISSION_DENIED:
                            errorType = "permission_denied";
                            break;
                        case error.POSITION_UNAVAILABLE:
                            errorType = "position_unavailable";
                            break;
                        case error.TIMEOUT:
                            errorType = "timeout";
                            break;
                    }
                    
                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ü–µ–Ω–∫—É –¥–∞–∂–µ –±–µ–∑ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏
                    saveRatingData({
                        rating: rating,
                        geoError: errorType,
                        timestamp: new Date().toISOString(),
                        userAgent: navigator.userAgent,
                        screenResolution: `${screen.width}x${screen.height}`,
                        timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                        language: navigator.language,
                        pageUrl: window.location.href
                    });
                    
                    showRatingResult(`–°–ø–∞—Å–∏–±–æ –∑–∞ –æ—Ü–µ–Ω–∫—É ${rating} ‚≠ê! –í–∞—à –æ—Ç–∑—ã–≤ –æ—á–µ–Ω—å –≤–∞–∂–µ–Ω –¥–ª—è –Ω–∞—Å!`, true);
                },
                {
                    enableHighAccuracy: true,
                    timeout: 10000,
                    maximumAge: 60000
                }
            );
        }

        // –§—É–Ω–∫—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ—Ü–µ–Ω–∫–∏
        function saveRatingData(data) {
            // –í–ê–ñ–ù–û: –ó–¥–µ—Å—å –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –≤–∞—à —Å–µ—Ä–≤–µ—Ä
            // –≠—Ç–æ –ø—Ä–∏–º–µ—Ä —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ - –∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—É—é –æ—Ç–ø—Ä–∞–≤–∫—É –¥–∞–Ω–Ω—ã—Ö
            
            console.log('üêæ –î–∞–Ω–Ω—ã–µ –æ—Ü–µ–Ω–∫–∏ PetsHub:', data);
            
            // –í–∞—Ä–∏–∞–Ω—Ç 1: –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ –∫–æ–Ω—Å–æ–ª—å (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
            logToConsole(data);
            
            // –í–∞—Ä–∏–∞–Ω—Ç 2: –û—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ Google Forms (—Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –∫–æ–≥–¥–∞ –Ω–∞—Å—Ç—Ä–æ–∏—Ç–µ)
            // sendToGoogleForm(data);
            
            // –í–∞—Ä–∏–∞–Ω—Ç 3: –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ –≤–∞—à —Å–µ—Ä–≤–µ—Ä (—Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –∫–æ–≥–¥–∞ –Ω–∞—Å—Ç—Ä–æ–∏—Ç–µ)
            // sendToServer(data);
            
            // –í–∞—Ä–∏–∞–Ω—Ç 4: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage –∫–∞–∫ –∑–∞–ø–∞—Å–Ω–æ–π –≤–∞—Ä–∏–∞–Ω—Ç
            saveToLocalStorage(data);
        }

        // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–Ω—Å–æ–ª—å (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
        function logToConsole(data) {
            console.group('üêæ –ù–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞ PetsHub');
            console.log('‚≠ê –û—Ü–µ–Ω–∫–∞:', data.rating);
            console.log('üìç –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã:', data.latitude ? `${data.latitude}, ${data.longitude}` : '–ù–µ –¥–æ—Å—Ç—É–ø–Ω–æ');
            console.log('üïê –í—Ä–µ–º—è:', data.timestamp);
            console.log('üåê –ë—Ä–∞—É–∑–µ—Ä:', data.userAgent);
            console.log('üíª –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ:', data.screenResolution);
            console.log('üåç –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å:', data.timezone);
            console.log('üó£Ô∏è –Ø–∑—ã–∫:', data.language);
            console.groupEnd();
        }

        // –ü—Ä–∏–º–µ—Ä –æ—Ç–ø—Ä–∞–≤–∫–∏ —á–µ—Ä–µ–∑ Google Forms
        function sendToGoogleForm(data) {
            // 1. –°–æ–∑–¥–∞–π—Ç–µ Google Form —Å –Ω—É–∂–Ω—ã–º–∏ –ø–æ–ª—è–º–∏
            // 2. –ü–æ–ª—É—á–∏—Ç–µ ID —Ñ–æ—Ä–º—ã –∏–∑ URL
            // 3. –ó–∞–º–µ–Ω–∏—Ç–µ YOUR_FORM_ID_HERE –Ω–∞ –≤–∞—à ID
            /*
            const formId = 'YOUR_FORM_ID_HERE';
            const formData = new FormData();
            formData.append('entry.123456789', data.rating);
            formData.append('entry.987654321', data.latitude || 'N/A');
            formData.append('entry.555555555', data.longitude || 'N/A');
            formData.append('entry.444444444', data.timestamp);
            
            fetch(`https://docs.google.com/forms/d/e/${formId}/formResponse`, {
                method: 'POST',
                body: formData,
                mode: 'no-cors'
            });
            */
        }

        // –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ –≤–∞—à —Å–µ—Ä–≤–µ—Ä
        function sendToServer(data) {
            /*
            fetch('/api/save-rating', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(result => {
                console.log('‚úÖ –î–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä');
            })
            .catch(error => {
                console.error('‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä:', error);
            });
            */
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage
        function saveToLocalStorage(data) {
            try {
                const ratings = JSON.parse(localStorage.getItem('petshub_ratings') || '[]');
                ratings.push(data);
                localStorage.setItem('petshub_ratings', JSON.stringify(ratings));
                console.log('üíæ –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ localStorage');
            } catch (e) {
                console.error('‚ùå –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ localStorage:', e);
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –æ—Ü–µ–Ω–∫–∏
        function showRatingResult(message, isSuccess) {
            ratingResult.innerHTML = `
                <div class="rating-info ${isSuccess ? 'success' : 'error'}">
                    ${message}
                </div>
            `;
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (—Ç–æ–ª—å–∫–æ –¥–ª—è –≤–∞—Å)
        function showCollectedData() {
            const ratings = JSON.parse(localStorage.getItem('petshub_ratings') || '[]');
            console.log('üìä –í—Å–µ —Å–æ–±—Ä–∞–Ω–Ω—ã–µ –æ—Ü–µ–Ω–∫–∏:', ratings);
            return ratings;
        }

        // –ß—Ç–æ–±—ã –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ, –≤—ã–∑–æ–≤–∏—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞: showCollectedData()
    </script>

</body>
</html>